"use strict";(self["webpackChunkrecordis"]=self["webpackChunkrecordis"]||[]).push([[152],{6576:function(e,t,s){s.d(t,{Z:function(){return u}});var o=s(3396),a=s(1097);const n={id:"loading",class:"d-none top-0 bg-light",style:{width:"100vw",height:"100vh","z-index":"10000000"}},i=(0,o._)("div",{class:"position-fixed top-50 start-50 translate-middle"},[(0,o._)("img",{src:a,style:{width:"300px",height:"300px"},alt:"header-img"}),(0,o._)("br"),(0,o._)("span",{class:"fs-2 d-block text-center"},"資料載入中"),(0,o._)("br"),(0,o._)("div",{class:"progress",role:"progressbar","aria-label":"Animated striped","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"},[(0,o._)("div",{class:"progress-bar bg-dark progress-bar-striped progress-bar-animated",style:{width:"100%"}})])],-1),d=[i];function l(e,t,s,a,i,l){return(0,o.wg)(),(0,o.iD)("div",n,d)}var r={data(){return{loadingValue:25}},methods:{loadingPageShow(){const e=document.getElementById("loading");e.classList.remove("d-none")},loadingPageHide(){const e=document.getElementById("loading");e.classList.add("d-none")}}},c=s(89);const p=(0,c.Z)(r,[["render",l]]);var u=p},8152:function(e,t,s){s.r(t),s.d(t,{default:function(){return he}});var o=s(3396),a=s(7139),n=s(9242),i=s(1097);const d={class:"container d-flex justify-content-center"},l={class:"w-75"},r=(0,o._)("div",{class:"border-bottom border-dark d-flex justify-content-center align-items-center"},[(0,o._)("div",{class:"my-4 w-50 d-flex justify-content-between align-items-center flex-column flex-md-row"},[(0,o._)("img",{src:i,style:{width:"100px",height:"100px"},alt:"header-img",class:"me-lg-5"}),(0,o._)("span",{class:"fs-2 d-block mt-2"},"預約外帶")])],-1),c={class:"border-bottom border-dark py-4"},p=(0,o._)("p",{class:"fs-4"},"預約訂單內容",-1),u={class:"table"},m=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col",class:"text-center col-5"},"品項"),(0,o._)("th",{scope:"col",class:"text-center"},"單價"),(0,o._)("th",{scope:"col",class:"text-center"},"數量"),(0,o._)("th",{scope:"col",class:"text-center"},"小計")])],-1),h={class:"text-center col-5"},g={class:"text-center"},f={class:"text-center"},_={class:"text-center"},b={class:"text-end"},w={colspan:"4",class:"fs-4 fw-bold"},v={class:"ms-3"},y={class:"border-bottom border-dark py-4"},k=(0,o._)("p",{class:"fs-4"},"優惠券",-1),D={class:"input-group mb-3"},x={class:"border-bottom border-dark py-4"},C=(0,o._)("p",{class:"fs-4"},"消費金額總計",-1),M={class:"table"},$=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center w-50",scope:"col"},"項目"),(0,o._)("th",{class:"text-center w-50",scope:"col"},"費用")])],-1),T=(0,o._)("td",{class:"text-center"},"餐點費用",-1),V={class:"text-center"},z={key:0},U={class:"text-center"},P={class:"text-center"},q={class:"text-end"},O=(0,o._)("td",null,null,-1),H={colspan:"2",class:"fs-4 fw-bold"},S={class:"ms-3"},F={action:"",class:"needs-validation",novalidate:""},L={class:"border-bottom border-dark py-4"},R=(0,o._)("p",{class:"fs-4"},"預約取餐時間",-1),Y={class:"row row-cols-2 row-cols-md-5 gy-2"},Z=["for"],E=["name","id","value","selected"],K=(0,o._)("div",{class:"invalid-feedback"}," 請選擇取餐日期 ",-1),j=["for"],A=["name","id","value","selected"],I=(0,o._)("div",{class:"invalid-feedback"}," 請選擇取餐日期 ",-1),B={class:"mt-4"},G=(0,o._)("option",{disabled:"",selected:"",value:""},"請選擇取餐時段",-1),W=["value","disabled"],J=(0,o._)("div",{class:"invalid-feedback"}," 請選擇取餐時間 ",-1),N=(0,o._)("option",{disabled:"",selected:"",value:""},"請選擇取餐時段",-1),Q=["value","disabled"],X=(0,o._)("div",{class:"invalid-feedback"}," 請選擇取餐時間 ",-1),ee={class:"border-dark py-4"},te=(0,o._)("p",{class:"fs-4"},"取餐資訊",-1),se={for:"name",class:"w-100"},oe=(0,o._)("div",{class:"invalid-feedback"}," 請輸入取餐人姓名 ",-1),ae={for:"name",class:"w-100 mt-3"},ne=(0,o._)("div",{class:"invalid-feedback"}," 請輸入取餐人連絡電話 ",-1),ie={for:"message",class:"w-100 mt-3"},de={class:"py-4 text-center"};function le(e,t,s,i,le,re){const ce=(0,o.up)("LoadingPage"),pe=(0,o.up)("messageToast");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(ce,{ref:"loadingPage"},null,512),(0,o.Wm)(pe,{ref:"messageToast",messageReceived:e.toastMessage,style:{"z-index":"100"}},null,8,["messageReceived"]),(0,o._)("div",d,[(0,o._)("div",l,[r,(0,o._)("div",null,[(0,o._)("div",c,[p,(0,o._)("table",u,[m,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(le.cartContent.carts,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",h,(0,a.zw)(e.product.title),1),(0,o._)("td",g,(0,a.zw)(e.product.price),1),(0,o._)("td",f,(0,a.zw)(e.qty),1),(0,o._)("td",_,(0,a.zw)(e.total),1)])))),128)),(0,o._)("tr",b,[(0,o._)("td",w,[(0,o.Uk)(" 餐點費用:"),(0,o._)("span",v,(0,a.zw)(le.cartContent.total),1)])])])])]),(0,o._)("div",y,[k,(0,o._)("div",D,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control shadow-none","onUpdate:modelValue":t[0]||(t[0]=e=>le.couponCode=e),placeholder:"請輸入優惠券代碼","aria-label":"Recipient's username"},null,512),[[n.nr,le.couponCode]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[1]||(t[1]=(...e)=>re.coupon&&re.coupon(...e))}," 送出優惠券 ")])]),(0,o._)("div",x,[C,(0,o._)("table",M,[$,(0,o._)("tbody",null,[(0,o._)("tr",null,[T,(0,o._)("td",V,(0,a.zw)(le.cartContent.total),1)]),le.cartContent.total!==le.cartContent.final_total?((0,o.wg)(),(0,o.iD)("tr",z,[(0,o._)("td",U,(0,a.zw)(le.cartContent.carts[0].coupon.title),1),(0,o._)("td",P," -"+(0,a.zw)(le.cartContent.total-le.cartContent.final_total),1)])):(0,o.kq)("",!0),(0,o._)("tr",q,[O,(0,o._)("td",H,[(0,o.Uk)(" 總計:"),(0,o._)("span",S,(0,a.zw)(le.cartContent.final_total),1)])])])])]),(0,o._)("form",F,[(0,o._)("div",L,[R,(0,o._)("div",Y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(le.date,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check col",key:e},[this.orderDate!==e?((0,o.wg)(),(0,o.iD)("label",{key:0,class:"form-check-label btn btn-outline-dark w-100",for:e},[(0,o.Uk)((0,a.zw)(e)+" ",1),(0,o.wy)((0,o._)("input",{class:"form-check-input d-none",type:"radio",name:le.date,id:e,"onUpdate:modelValue":t[2]||(t[2]=e=>le.orderDate=e),value:e,required:"",selected:e===this.orderDate},null,8,E),[[n.G2,le.orderDate]]),K],8,Z)):(0,o.kq)("",!0),this.orderDate===e?((0,o.wg)(),(0,o.iD)("label",{key:1,class:"form-check-label btn btn-dark w-100",for:e},[(0,o.Uk)((0,a.zw)(e)+" ",1),(0,o.wy)((0,o._)("input",{class:"form-check-input d-none",type:"radio",name:le.date,id:e,"onUpdate:modelValue":t[3]||(t[3]=e=>le.orderDate=e),value:e,required:"",selected:e===this.orderDate},null,8,A),[[n.G2,le.orderDate]]),I],8,j)):(0,o.kq)("",!0)])))),128))]),(0,o._)("div",B,[le.firstDate===le.orderDate?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[4]||(t[4]=e=>le.orderTime=e),required:""},[G,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(le.timeOptionFirstDay,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,a.zw)(e.option),9,W)))),128))],512)),[[n.bM,le.orderTime]]):(0,o.kq)("",!0),J,le.firstDate!==le.orderDate?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:1,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[5]||(t[5]=e=>le.orderTime=e),required:""},[N,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(le.timeOptionOtherDay,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,a.zw)(e.option),9,Q)))),128))],512)),[[n.bM,le.orderTime]]):(0,o.kq)("",!0),X])]),(0,o._)("div",ee,[te,(0,o._)("label",se,[(0,o.Uk)(" 取餐人姓名 "),(0,o.wy)((0,o._)("input",{type:"text",class:"form-control shadow-none mt-1","onUpdate:modelValue":t[6]||(t[6]=e=>le.orderMessage.user.name=e),placeholder:"請輸入取餐人姓名","aria-label":"Recipient's username",required:""},null,512),[[n.nr,le.orderMessage.user.name]]),oe]),(0,o._)("label",ae,[(0,o.Uk)(" 取餐人連絡電話 "),(0,o.wy)((0,o._)("input",{type:"tel",class:"form-control shadow-none mt-1","onUpdate:modelValue":t[7]||(t[7]=e=>le.orderMessage.user.tel=e),placeholder:"請輸入取餐人連絡電話","aria-label":"Recipient's username",required:""},null,512),[[n.nr,le.orderMessage.user.tel]]),ne]),(0,o._)("label",ie,[(0,o.Uk)(" 備註訊息 "),(0,o.wy)((0,o._)("textarea",{class:"form-control shadow-none mt-1",cols:"30",rows:"5","onUpdate:modelValue":t[8]||(t[8]=e=>le.orderMessage.message=e)},"\n              ",512),[[n.nr,le.orderMessage.message]])])]),(0,o._)("div",de,[(0,o._)("button",{class:"btn btn-lg btn-dark px-4",type:"button",onClick:t[9]||(t[9]=(...e)=>re.formValidation&&re.formValidation(...e))}," 送出訂單 ")])])])])])],64)}s(7658);var re=s(6576),ce=s(7759),pe={data(){return{modal:{},date:[],couponCode:"",cartContent:{},orderDate:{},orderTime:"",orderMessage:{user:{name:"",email:"",tel:"",address:"自取"},message:""},firstDate:"",timeOptionFirstDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],timeOptionOtherDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],alreadyValidated:!1}},components:{LoadingPage:re.Z,messageToast:ce.Z},methods:{getCartContent(){this.$refs.loadingPage.loadingPageShow();const e="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.get(e).then((e=>{console.log(e),this.cartContent=e.data.data,console.log(this.cartContent),this.cartContent.final_total=Math.floor(this.cartContent.final_total),this.$refs.loadingPage.loadingPageHide()}))},coupon(){this.$refs.loadingPage.loadingPageShow();const e="https://vue3-course-api.hexschool.io/api/chenshaoen/coupon",t={data:{code:`${this.couponCode}`}};this.axios.post(e,t).then((e=>{console.log(e),this.getCartContent(),this.$refs.loadingPage.loadingPageHide(),e.data.success?(this.toastMessage="已成功使用優惠代碼",this.$refs.messageToast.toastShow()):(this.toastMessage="優惠代碼輸入錯誤或已超過使用期限",this.$refs.messageToast.toastShow())}))},confirmOrder(){const e={data:{user:{name:`${this.orderMessage.user.name}`,email:`${this.orderDate}/${this.orderTime}`,tel:`${this.orderMessage.user.tel}`,address:"自取"},message:`${this.orderMessage.message}`}},t="https://vue3-course-api.hexschool.io/api/chenshaoen/order";this.axios.post(t,e).then((e=>{console.log(e),this.$router.push(`/orderbuilt/${e.data.orderId}`)}))},formValidation(){let e=!0;const t=()=>{!1===this.alreadyValidated&&this.confirmOrder(),this.alreadyValidated=!0},s=document.querySelectorAll(".needs-validation");Array.from(s).forEach((s=>{s.addEventListener("click",(o=>{s.checkValidity()?s.checkValidity()&&!0===e&&t():(e=!1,o.preventDefault(),o.stopPropagation()),s.classList.add("was-validated")}),!1)}))}},created(){window.scrollTo({top:0,behavior:"smooth"})},mounted(){const e=new Date;for(let o=1;o<=5;o+=1){const t=new Date;t.setTime(e.getTime()+864e5*(o-1));const s=`${t.getMonth()+1}/${t.getDate()}`;this.date.push(s),1===o&&(this.orderDate=`${t.getMonth()+1}/${t.getDate()}`,this.firstDate=`${t.getMonth()+1}/${t.getDate()}`)}const t=new Date;t.setTime(e.getTime()),t.setHours(11),t.setMinutes(0),t.setSeconds(0);const s=Math.floor((e.getTime()-t.getTime())/9e5);for(let o=1;o<=s;o+=1)o<=12?(this.timeOptionFirstDay[o-1].passed=!0,console.log(o,this.timeOptionFirstDay[o-1])):o>=25&&o<=40&&(this.timeOptionFirstDay[o-13].passed=!0,console.log(this.timeOptionFirstDay[o-13]));this.getCartContent()}},ue=s(89);const me=(0,ue.Z)(pe,[["render",le]]);var he=me}}]);
//# sourceMappingURL=152.cb440ade.js.map