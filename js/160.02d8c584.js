"use strict";(self["webpackChunkrecordis"]=self["webpackChunkrecordis"]||[]).push([[160],{6576:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3396),o=s(1097);const i={id:"loading",class:"d-none top-0 bg-light",style:{width:"100vw",height:"100vh","z-index":"10000000"}},n=(0,a._)("div",{class:"position-fixed top-50 start-50 translate-middle"},[(0,a._)("img",{src:o,style:{width:"300px",height:"300px"},alt:"header-img"}),(0,a._)("br"),(0,a._)("span",{class:"fs-2 d-block text-center"},"資料載入中"),(0,a._)("br"),(0,a._)("div",{class:"progress",role:"progressbar","aria-label":"Animated striped","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"},[(0,a._)("div",{class:"progress-bar bg-dark progress-bar-striped progress-bar-animated",style:{width:"100%"}})])],-1),d=[n];function r(e,t,s,o,n,r){return(0,a.wg)(),(0,a.iD)("div",i,d)}var l={data(){return{loadingValue:25}},methods:{loadingPageShow(){const e=document.getElementById("loading");e.classList.remove("d-none")},loadingPageHide(){const e=document.getElementById("loading");e.classList.add("d-none")}}},p=s(89);const c=(0,p.Z)(l,[["render",r]]);var h=c},7160:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var a=s(3396),o=s(7139),i=s(9242),n=s(1097);const d={class:"container",style:{"max-width":"600px"}},r={class:"mt-3 mb-5 needs-validation",novalidate:""},l=(0,a._)("div",{class:"border-bottom border-dark d-flex justify-content-center align-items-center"},[(0,a._)("div",{class:"my-4 w-50 d-flex justify-content-between align-items-center flex-column flex-md-row"},[(0,a._)("img",{src:n,style:{width:"100px",height:"100px"},alt:"header-img",class:"me-lg-5"}),(0,a._)("span",{class:"fs-2 d-block mt-2"},"線上訂位")])],-1),p={class:"border-bottom border-dark pb-5"},c=(0,a._)("span",{class:"fs-3 d-block my-4"},"訂位時間",-1),h={class:"row row-cols-2 row-cols-md-5 gy-2"},m=["for"],u=["name","id","value","selected"],f=(0,a._)("div",{class:"invalid-feedback"}," 請選擇訂位日期 ",-1),v=["for"],g=["name","id","value","selected"],b=(0,a._)("div",{class:"invalid-feedback"}," 請選擇訂位日期 ",-1),w={class:"mt-4"},y=(0,a._)("option",{disabled:"",selected:"",value:""},"請選擇訂位時段",-1),k=["value","disabled"],_=(0,a._)("option",{disabled:"",selected:"",value:""},"請選擇訂位時段",-1),D=["value","disabled"],I=(0,a._)("div",{class:"invalid-feedback"}," 請選擇訂位時間 ",-1),x={class:"mb-5"},C=(0,a._)("span",{class:"fs-3 d-block my-4"},"訂位者資訊",-1),P={for:"name",class:"w-100 form-label"},$=(0,a._)("div",{class:"invalid-feedback"}," 請填入姓名 ",-1),q={for:"tel",class:"w-100 form-label"},V=(0,a._)("div",{class:"invalid-feedback"}," 請填入連絡電話 ",-1),U={for:"message",class:"w-100 form-label"},T={class:"text-center"},H=["disabled"];function L(e,t,s,n,L,M){const O=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(O,{ref:"loadingPage"},null,512),(0,a._)("div",d,[(0,a._)("form",r,[l,(0,a._)("div",p,[c,(0,a._)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.date,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"form-check col",key:e},[this.reservationInfo.date!==e?((0,a.wg)(),(0,a.iD)("label",{key:0,class:"form-check-label btn btn-outline-dark w-100",for:e},[(0,a.Uk)((0,o.zw)(e)+" ",1),(0,a.wy)((0,a._)("input",{class:"form-check-input d-none",type:"radio",name:L.date,id:e,"onUpdate:modelValue":t[0]||(t[0]=e=>L.reservationInfo.date=e),value:e,required:"",selected:e===this.reservationInfo.date},null,8,u),[[i.G2,L.reservationInfo.date]]),f],8,m)):(0,a.kq)("",!0),this.reservationInfo.date===e?((0,a.wg)(),(0,a.iD)("label",{key:1,class:"form-check-label btn btn-dark w-100",for:e},[(0,a.Uk)((0,o.zw)(e)+" ",1),(0,a.wy)((0,a._)("input",{class:"form-check-input d-none",type:"radio",name:L.date,id:e,"onUpdate:modelValue":t[1]||(t[1]=e=>L.reservationInfo.date=e),value:e,required:"",selected:e===this.reservationInfo.date},null,8,g),[[i.G2,L.reservationInfo.date]]),b],8,v)):(0,a.kq)("",!0)])))),128))]),(0,a._)("div",w,[L.firstDate===L.reservationInfo.date?(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:0,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>L.reservationInfo.time=e),required:""},[y,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.timeOptionFirstDay,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,o.zw)(e.option),9,k)))),128))],512)),[[i.bM,L.reservationInfo.time]]):(0,a.kq)("",!0),L.firstDate!==L.reservationInfo.date?(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:1,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>L.reservationInfo.time=e),required:""},[_,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.timeOptionOtherDay,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,o.zw)(e.option),9,D)))),128))],512)),[[i.bM,L.reservationInfo.time]]):(0,a.kq)("",!0),I])]),(0,a._)("div",x,[C,(0,a._)("label",P,[(0,a.Uk)(" 訂位者姓名 "),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control my-2 shadow-none","onUpdate:modelValue":t[4]||(t[4]=e=>L.reservationInfo.name=e),required:""},null,512),[[i.nr,L.reservationInfo.name]]),$]),(0,a._)("label",q,[(0,a.Uk)(" 訂位者連絡電話 "),(0,a.wy)((0,a._)("input",{type:"tel",class:"form-control my-2 shadow-none","onUpdate:modelValue":t[5]||(t[5]=e=>L.reservationInfo.tel=e),required:""},null,512),[[i.nr,L.reservationInfo.tel]]),V]),(0,a._)("label",U,[(0,a.Uk)(" 備註 "),(0,a.wy)((0,a._)("textarea",{name:"",id:"",cols:"30",rows:"5",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>L.reservationInfo.message=e)},null,512),[[i.nr,L.reservationInfo.message]])])]),(0,a._)("div",T,[(0,a._)("button",{type:"button",class:"btn btn-lg btn-dark",onClick:t[7]||(t[7]=(...e)=>M.validation&&M.validation(...e)),disabled:L.submitButtonDisabled,id:"formConfirmButton"}," 確認訂位 ",8,H)])])])],64)}s(7658);var M=s(6576),O={data(){return{date:[],reservationInfo:{date:"",time:"",name:"",tel:"",email:"",message:""},firstDate:"",orderDate:{},timeOptionFirstDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],timeOptionOtherDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],cartContent:{},reservationId:"",submitButtonDisabled:!1,alreadyValidated:!1}},components:{LoadingPage:M.Z},methods:{getCartContent(){const e="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.get(e).then((e=>{this.cartContent=e.data.data,this.cartContent.final_total=Math.floor(this.cartContent.final_total)}))},validation(){let e=!0;const t=()=>{!1===this.alreadyValidated&&this.clearCart(),this.alreadyValidated=!0,this.$refs.loadingPage.loadingPageShow()},s=document.querySelectorAll(".needs-validation");Array.from(s).forEach((s=>{s.addEventListener("click",(a=>{s.classList.add("was-validated"),s.checkValidity()?s.checkValidity()&&!0===e&&t():(e=!1,a.preventDefault(),a.stopPropagation(),s.classList.add("was-validated"))}),!1)}))},clearCart(){const e="https://vue3-course-api.hexschool.io/api/chenshaoen/carts";this.axios.delete(e).then((()=>{this.addProductReservation()}))},addProductReservation(){const e={data:{product_id:"-NNp5WVf-9HgTdLHA-hk",qty:1}},t="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.post(t,e).then((()=>{this.confirmReservation()}))},confirmReservation(){const e={data:{user:{name:`${this.reservationInfo.name}`,email:`${this.reservationInfo.date}/${this.reservationInfo.time}`,tel:`${this.reservationInfo.tel}`,address:"線上訂位"},message:`${this.reservationInfo.message}`}},t="https://vue3-course-api.hexschool.io/api/chenshaoen/order";this.axios.post(t,e).then((e=>{this.addCartProductsBack(e.data.orderId)}))},addCartProductsBack(e){0!==this.cartContent.carts.length?this.cartContent.carts.forEach((t=>{const s={data:{product_id:`${t.product.id}`,qty:t.qty}},a="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.post(a,s).then((()=>{this.pushToConfirmPage(e)}))})):0===this.cartContent.carts.length&&this.pushToConfirmPage(e)},pushToConfirmPage(e){this.$router.push(`/reservationconfirm/${e}`)}},mounted(){window.scrollTo({top:0,behavior:"smooth"}),this.getCartContent();const e=new Date;for(let a=1;a<=5;a+=1){const t=new Date;t.setTime(e.getTime()+864e5*(a-1));const s=`${t.getMonth()+1}/${t.getDate()}`;this.date.push(s),1===a&&(this.reservationInfo.date=`${t.getMonth()+1}/${t.getDate()}`,this.firstDate=`${t.getMonth()+1}/${t.getDate()}`)}const t=new Date;t.setTime(e.getTime()),t.setHours(11),t.setMinutes(0),t.setSeconds(0);const s=Math.floor((e.getTime()-t.getTime())/9e5);for(let a=1;a<=s;a+=1)a<=12?this.timeOptionFirstDay[a-1].passed=!0:a>=25&&a<=40&&(this.timeOptionFirstDay[a-13].passed=!0)}},B=s(89);const z=(0,B.Z)(O,[["render",L]]);var E=z}}]);
//# sourceMappingURL=160.02d8c584.js.map