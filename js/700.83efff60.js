"use strict";(self["webpackChunkrecordis"]=self["webpackChunkrecordis"]||[]).push([[700],{6576:function(e,t,o){o.d(t,{Z:function(){return h}});var s=o(3396),a=o(1097);const n={id:"loading",class:"d-none top-0 bg-light",style:{width:"100vw",height:"100vh","z-index":"10000000"}},i=(0,s._)("div",{class:"position-fixed top-50 start-50 translate-middle"},[(0,s._)("img",{src:a,style:{width:"300px",height:"300px"},alt:"header-img"}),(0,s._)("br"),(0,s._)("span",{class:"fs-2 d-block text-center"},"資料載入中"),(0,s._)("br"),(0,s._)("div",{class:"progress",role:"progressbar","aria-label":"Animated striped","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"},[(0,s._)("div",{class:"progress-bar bg-dark progress-bar-striped progress-bar-animated",style:{width:"100%"}})])],-1),d=[i];function r(e,t,o,a,i,r){return(0,s.wg)(),(0,s.iD)("div",n,d)}var l={data(){return{loadingValue:25}},methods:{loadingPageShow(){const e=document.getElementById("loading");e.classList.remove("d-none")},loadingPageHide(){const e=document.getElementById("loading");e.classList.add("d-none")}}},p=o(89);const c=(0,p.Z)(l,[["render",r]]);var h=c},3700:function(e,t,o){o.r(t),o.d(t,{default:function(){return z}});var s=o(3396),a=o(7139),n=o(9242),i=o(1097);const d={class:"container",style:{"max-width":"600px"}},r={class:"mt-3 mb-5 needs-validation",novalidate:""},l=(0,s._)("div",{class:"border-bottom border-dark d-flex justify-content-center align-items-center"},[(0,s._)("div",{class:"my-4 w-50 d-flex justify-content-between align-items-center flex-column flex-md-row"},[(0,s._)("img",{src:i,style:{width:"100px",height:"100px"},alt:"header-img",class:"me-lg-5"}),(0,s._)("span",{class:"fs-2 d-block mt-2"},"線上訂位")])],-1),p={class:"border-bottom border-dark pb-5"},c=(0,s._)("span",{class:"fs-3 d-block my-4"},"訂位時間",-1),h={class:"row row-cols-2 row-cols-md-5 gy-2"},m=["for"],u=["name","id","value","selected"],f=(0,s._)("div",{class:"invalid-feedback"}," 請選擇訂位日期 ",-1),v=["for"],g=["name","id","value","selected"],b=(0,s._)("div",{class:"invalid-feedback"}," 請選擇訂位日期 ",-1),w={class:"mt-4"},y=(0,s._)("option",{disabled:"",selected:"",value:""},"請選擇訂位時段",-1),k=["value","disabled"],_=(0,s._)("option",{disabled:"",selected:"",value:""},"請選擇訂位時段",-1),D=["value","disabled"],I=(0,s._)("div",{class:"invalid-feedback"}," 請選擇訂位時間 ",-1),x={class:"mb-5"},C=(0,s._)("span",{class:"fs-3 d-block my-4"},"訂位者資訊",-1),P={for:"name",class:"w-100 form-label"},$=(0,s._)("div",{class:"invalid-feedback"}," 請填入姓名 ",-1),q={for:"tel",class:"w-100 form-label"},V=(0,s._)("div",{class:"invalid-feedback"}," 請填入連絡電話 ",-1),U={for:"message",class:"w-100 form-label"},T={class:"text-center"},B=["disabled"];function H(e,t,o,i,H,L){const M=(0,s.up)("LoadingPage");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{ref:"loadingPage"},null,512),(0,s._)("div",d,[(0,s._)("form",r,[l,(0,s._)("div",p,[c,(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.date,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"form-check col",key:e},[this.reservationInfo.date!==e?((0,s.wg)(),(0,s.iD)("label",{key:0,class:"form-check-label btn btn-outline-dark w-100",for:e},[(0,s.Uk)((0,a.zw)(e)+" ",1),(0,s.wy)((0,s._)("input",{class:"form-check-input d-none",type:"radio",name:H.date,id:e,"onUpdate:modelValue":t[0]||(t[0]=e=>H.reservationInfo.date=e),value:e,required:"",selected:e===this.reservationInfo.date},null,8,u),[[n.G2,H.reservationInfo.date]]),f],8,m)):(0,s.kq)("",!0),this.reservationInfo.date===e?((0,s.wg)(),(0,s.iD)("label",{key:1,class:"form-check-label btn btn-dark w-100",for:e},[(0,s.Uk)((0,a.zw)(e)+" ",1),(0,s.wy)((0,s._)("input",{class:"form-check-input d-none",type:"radio",name:H.date,id:e,"onUpdate:modelValue":t[1]||(t[1]=e=>H.reservationInfo.date=e),value:e,required:"",selected:e===this.reservationInfo.date},null,8,g),[[n.G2,H.reservationInfo.date]]),b],8,v)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",w,[H.firstDate===H.reservationInfo.date?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>H.reservationInfo.time=e),required:""},[y,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.timeOptionFirstDay,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,a.zw)(e.option),9,k)))),128))],512)),[[n.bM,H.reservationInfo.time]]):(0,s.kq)("",!0),H.firstDate!==H.reservationInfo.date?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:1,class:"form-select shadow-none","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>H.reservationInfo.time=e),required:""},[_,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.timeOptionOtherDay,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.option,value:e.option,disabled:e.passed},(0,a.zw)(e.option),9,D)))),128))],512)),[[n.bM,H.reservationInfo.time]]):(0,s.kq)("",!0),I])]),(0,s._)("div",x,[C,(0,s._)("label",P,[(0,s.Uk)(" 訂位者姓名 "),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control my-2 shadow-none","onUpdate:modelValue":t[4]||(t[4]=e=>H.reservationInfo.name=e),required:""},null,512),[[n.nr,H.reservationInfo.name]]),$]),(0,s._)("label",q,[(0,s.Uk)(" 訂位者連絡電話 "),(0,s.wy)((0,s._)("input",{type:"tel",class:"form-control my-2 shadow-none","onUpdate:modelValue":t[5]||(t[5]=e=>H.reservationInfo.tel=e),required:""},null,512),[[n.nr,H.reservationInfo.tel]]),V]),(0,s._)("label",U,[(0,s.Uk)(" 備註 "),(0,s.wy)((0,s._)("textarea",{name:"",id:"",cols:"30",rows:"5",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>H.reservationInfo.message=e)},null,512),[[n.nr,H.reservationInfo.message]])])]),(0,s._)("div",T,[(0,s._)("button",{type:"button",class:"btn btn-lg btn-dark",onClick:t[7]||(t[7]=(...e)=>L.validation&&L.validation(...e)),disabled:H.submitButtonDisabled,id:"formConfirmButton"}," 確認訂位 ",8,B)])])])],64)}o(7658);var L=o(6576),M={data(){return{date:[],reservationInfo:{date:"",time:"",name:"",tel:"",email:"",message:""},firstDate:"",orderDate:{},timeOptionFirstDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],timeOptionOtherDay:[{option:"11:01 ~ 11:15",passed:!1},{option:"11:16 ~ 11:30",passed:!1},{option:"11:31 ~ 11:45",passed:!1},{option:"11:46 ~ 12:00",passed:!1},{option:"12:01 ~ 12:15",passed:!1},{option:"12:16 ~ 12:30",passed:!1},{option:"12:31 ~ 12:45",passed:!1},{option:"12:46 ~ 13:00",passed:!1},{option:"13:01 ~ 13:15",passed:!1},{option:"13:16 ~ 13:30",passed:!1},{option:"13:31 ~ 13:45",passed:!1},{option:"13:46 ~ 14:00",passed:!1},{option:"17:01 ~ 17:15",passed:!1},{option:"17:16 ~ 17:30",passed:!1},{option:"17:31 ~ 17:45",passed:!1},{option:"17:46 ~ 18:00",passed:!1},{option:"18:01 ~ 18:15",passed:!1},{option:"18:16 ~ 18:30",passed:!1},{option:"18:31 ~ 18:45",passed:!1},{option:"18:46 ~ 19:00",passed:!1},{option:"19:01 ~ 19:15",passed:!1},{option:"19:16 ~ 19:30",passed:!1},{option:"19:31 ~ 19:45",passed:!1},{option:"19:46 ~ 20:00",passed:!1},{option:"20:01 ~ 20:15",passed:!1},{option:"20:16 ~ 20:30",passed:!1},{option:"20:31 ~ 20:45",passed:!1},{option:"20:46 ~ 21:00",passed:!1}],cartContent:{},reservationId:"",submitButtonDisabled:!1,alreadyValidated:!1}},components:{LoadingPage:L.Z},methods:{getCartContent(){const e="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.get(e).then((e=>{console.log(e),this.cartContent=e.data.data,console.log(this.cartContent),this.cartContent.final_total=Math.floor(this.cartContent.final_total)}))},validation(){let e=!0;const t=()=>{!1===this.alreadyValidated&&this.clearCart(),this.alreadyValidated=!0,this.$refs.loadingPage.loadingPageShow()},o=document.querySelectorAll(".needs-validation");Array.from(o).forEach((o=>{o.addEventListener("click",(s=>{o.classList.add("was-validated"),o.checkValidity()?o.checkValidity()&&!0===e&&t():(e=!1,s.preventDefault(),s.stopPropagation(),o.classList.add("was-validated"))}),!1)}))},clearCart(){const e="https://vue3-course-api.hexschool.io/api/chenshaoen/carts";this.axios.delete(e).then((e=>{console.log("clearCart",e),this.addProductReservation()}))},addProductReservation(){const e={data:{product_id:"-NNp5WVf-9HgTdLHA-hk",qty:1}},t="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.post(t,e).then((e=>{console.log("addProductReservation",e),this.confirmReservation()}))},confirmReservation(){const e={data:{user:{name:`${this.reservationInfo.name}`,email:`${this.reservationInfo.date}/${this.reservationInfo.time}`,tel:`${this.reservationInfo.tel}`,address:"線上訂位"},message:`${this.reservationInfo.message}`}},t="https://vue3-course-api.hexschool.io/api/chenshaoen/order";this.axios.post(t,e).then((e=>{console.log("confirmReservation",e),this.addCartProductsBack(e.data.orderId)}))},addCartProductsBack(e){0!==this.cartContent.carts.length?this.cartContent.carts.forEach((t=>{const o={data:{product_id:`${t.product.id}`,qty:t.qty}},s="https://vue3-course-api.hexschool.io/api/chenshaoen/cart";this.axios.post(s,o).then((t=>{console.log("addCartProductsBack",t),this.pushToConfirmPage(e)}))})):0===this.cartContent.carts.length&&this.pushToConfirmPage(e)},pushToConfirmPage(e){this.$router.push(`/reservationconfirm/${e}`)}},mounted(){window.scrollTo({top:0,behavior:"smooth"}),this.getCartContent();const e=new Date;for(let s=1;s<=5;s+=1){const t=new Date;t.setTime(e.getTime()+864e5*(s-1));const o=`${t.getMonth()+1}/${t.getDate()}`;this.date.push(o),1===s&&(this.reservationInfo.date=`${t.getMonth()+1}/${t.getDate()}`,this.firstDate=`${t.getMonth()+1}/${t.getDate()}`)}const t=new Date;t.setTime(e.getTime()),t.setHours(11),t.setMinutes(0),t.setSeconds(0);const o=Math.floor((e.getTime()-t.getTime())/9e5);for(let s=1;s<=o;s+=1)s<=12?this.timeOptionFirstDay[s-1].passed=!0:s>=25&&s<=40&&(this.timeOptionFirstDay[s-13].passed=!0)}},O=o(89);const R=(0,O.Z)(M,[["render",H]]);var z=R}}]);
//# sourceMappingURL=700.83efff60.js.map